<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiskMap - Simple Traffic Risk Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .hover-grow {
            transition: transform 0.2s ease;
        }
        
        .hover-grow:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50">
    
    <div class="container mx-auto p-6 max-w-6xl">
        <!-- Friendly Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center gap-3 mb-4">
                <div class="bg-blue-500 p-3 rounded-full">
                    <!-- Map Pin Icon -->
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                </div>
                <h1 class="text-4xl font-bold text-gray-800">RiskMap</h1>
            </div>
            <p class="text-gray-600 text-lg">See where traffic accidents might happen</p>
        </div>

        <!-- Simple Tab Navigation -->
        <div class="mb-8 flex justify-center">
            <div class="inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 p-1 text-gray-500">
                <button id="map-tab" class="tab-btn active inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium transition-all bg-white text-gray-900 shadow-sm" onclick="showTab('map')">
                    üó∫Ô∏è Map View
                </button>
                <button id="list-tab" class="tab-btn inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium transition-all" onclick="showTab('list')">
                    üìã List View
                </button>
            </div>
        </div>

        <!-- Map View -->
        <div id="map-content" class="tab-content">
            <div class="bg-white border border-gray-200 shadow-md rounded-lg">
                <div class="p-6">
                    <h2 class="text-gray-800 text-xl font-semibold mb-4">Traffic Risk Areas</h2>
                    
                    <!-- Simple Legend -->
                    <div class="flex gap-4 mb-6">
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-red-400 rounded"></div>
                            <span class="text-gray-600">High Risk</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                            <span class="text-gray-600">Medium Risk</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-green-400 rounded"></div>
                            <span class="text-gray-600">Low Risk</span>
                        </div>
                    </div>
                    
                    <div class="relative h-96 bg-gray-50 border-2 border-gray-200 rounded-lg">
                        <!-- Simple Grid Background -->
                        <div 
                            class="absolute inset-0 opacity-20 pointer-events-none"
                            style="background-image: repeating-linear-gradient(0deg, #ccc, #ccc 1px, transparent 1px, transparent 20px), repeating-linear-gradient(90deg, #ccc, #ccc 1px, transparent 1px, transparent 20px); background-size: 20px 20px;"
                        ></div>

                        <!-- Risk Zones -->
                        <!-- High Risk: Downtown Intersection -->
                        <div class="absolute bg-red-400 border-2 border-red-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 35%; top: 25%; width: 15%; height: 12%;" 
                             title="Downtown Intersection - high risk"
                             onclick="showAreaDetails(1)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">Downtown Intersection</span>
                        </div>

                        <!-- High Risk: Highway 101 Exit -->
                        <div class="absolute bg-red-400 border-2 border-red-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 60%; top: 15%; width: 20%; height: 10%;" 
                             title="Highway 101 Exit - high risk"
                             onclick="showAreaDetails(2)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">Highway 101 Exit</span>
                        </div>

                        <!-- Medium Risk: Main St & 5th Ave -->
                        <div class="absolute bg-yellow-400 border-2 border-yellow-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 20%; top: 45%; width: 18%; height: 15%;" 
                             title="Main St & 5th Ave - medium risk"
                             onclick="showAreaDetails(3)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">Main St & 5th Ave</span>
                        </div>

                        <!-- Medium Risk: School Zone Area -->
                        <div class="absolute bg-yellow-400 border-2 border-yellow-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 65%; top: 60%; width: 16%; height: 12%;" 
                             title="School Zone Area - medium risk"
                             onclick="showAreaDetails(4)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">School Zone Area</span>
                        </div>

                        <!-- Low Risk: Residential District -->
                        <div class="absolute bg-green-400 border-2 border-green-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 75%; top: 40%; width: 15%; height: 18%;" 
                             title="Residential District - low risk"
                             onclick="showAreaDetails(5)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">Residential District</span>
                        </div>

                        <!-- Low Risk: Park Boulevard -->
                        <div class="absolute bg-green-400 border-2 border-green-500 rounded-md hover-grow cursor-pointer flex items-center justify-center p-2" 
                             style="left: 45%; top: 75%; width: 12%; height: 10%;" 
                             title="Park Boulevard - low risk"
                             onclick="showAreaDetails(6)">
                            <span class="text-white text-sm font-semibold text-center leading-tight drop-shadow">Park Boulevard</span>
                        </div>
                    </div>

                    <!-- Simple status -->
                    <div class="mt-4 text-center text-gray-500 text-sm">
                        Click on areas to see more details
                    </div>
                </div>
            </div>
        </div>

        <!-- List View -->
        <div id="list-content" class="tab-content hidden">
            <div class="bg-white border border-gray-200 shadow-md rounded-lg">
                <div class="p-6">
                    <h2 class="text-gray-800 text-xl font-semibold mb-2">All Risk Areas</h2>
                    <p class="text-gray-600 mb-6">Areas listed from highest to lowest risk</p>
                    
                    <div class="space-y-4">
                        <!-- High Risk Areas -->
                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Downtown Intersection</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200">
                                        ‚ö†Ô∏è High Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Busy intersection with lots of traffic during rush hour</p>
                                <div class="text-sm text-gray-500">
                                    <strong>47</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Highway 101 Exit</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200">
                                        ‚ö†Ô∏è High Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Cars merge quickly here and sometimes bump into each other</p>
                                <div class="text-sm text-gray-500">
                                    <strong>39</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>

                        <!-- Medium Risk Areas -->
                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Main St & 5th Ave</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 border border-yellow-200">
                                        üî∂ Medium Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Moderate traffic with occasional congestion</p>
                                <div class="text-sm text-gray-500">
                                    <strong>24</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">School Zone Area</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 border border-yellow-200">
                                        üî∂ Medium Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Lots of kids crossing the street when school starts and ends</p>
                                <div class="text-sm text-gray-500">
                                    <strong>18</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>

                        <!-- Low Risk Areas -->
                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Residential District</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200">
                                        ‚úÖ Low Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Quiet neighborhood with wide, well-lit streets</p>
                                <div class="text-sm text-gray-500">
                                    <strong>8</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-50 border border-gray-200 hover:shadow-md transition-shadow duration-200 rounded-lg p-4">
                            <div class="space-y-3">
                                <div class="flex items-start justify-between gap-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Park Boulevard</h3>
                                    <span class="px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200">
                                        ‚úÖ Low Risk
                                    </span>
                                </div>
                                <p class="text-gray-600">Low traffic area with good visibility</p>
                                <div class="text-sm text-gray-500">
                                    <strong>5</strong> incidents in the last 30 days
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary -->
                    <div class="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                        <div class="text-center text-gray-700">
                            <p class="font-medium">Summary</p>
                            <p class="text-sm mt-1">
                                Monitoring <strong>6</strong> areas ‚Ä¢ 
                                <span class="text-red-600 font-medium">2 high risk</span> ‚Ä¢ 
                                <span class="text-yellow-600 font-medium">2 medium risk</span> ‚Ä¢ 
                                <span class="text-green-600 font-medium">2 low risk</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Basic API URL (gonna be replaced with actual backend endpoint)
        const API_BASE_URL = 'http://localhost:5000/api';
        
        // Sample data structure (gonna be replaced with actual backend endpoint)
        let riskAreas = [
            {
                id: 1,
                name: "Downtown Intersection",
                riskLevel: "high",
                description: "Busy intersection with lots of traffic during rush hour",
                incidents: 47,
                longitude: -71.0589,
                latitude: 42.3601,
                position: { left: '35%', top: '25%', width: '15%', height: '12%' },
                features: {
                    lightLevel: "Daylight",
                    weather: "Clear",
                    roadCondition: "Dry"
                }
            },
            {
                id: 2,
                name: "Highway 101 Exit",
                riskLevel: "high",
                description: "Cars merge quickly here and sometimes bump into each other",
                incidents: 39,
                longitude: -71.0689,
                latitude: 42.3701,
                position: { left: '60%', top: '15%', width: '20%', height: '10%' },
                features: {
                    lightLevel: "Daylight",
                    weather: "Cloudy",
                    roadCondition: "Wet"
                }
            },
            {
                id: 3,
                name: "Main St & 5th Ave",
                riskLevel: "medium",
                description: "Moderate traffic with occasional congestion",
                incidents: 24,
                longitude: -71.0489,
                latitude: 42.3501,
                position: { left: '20%', top: '45%', width: '18%', height: '15%' },
                features: {
                    lightLevel: "Dusk",
                    weather: "Clear",
                    roadCondition: "Dry"
                }
            },
            {
                id: 4,
                name: "School Zone Area",
                riskLevel: "medium",
                description: "Lots of kids crossing the street when school starts and ends",
                incidents: 18,
                longitude: -71.0789,
                latitude: 42.3801,
                position: { left: '65%', top: '60%', width: '16%', height: '12%' },
                features: {
                    lightLevel: "Daylight",
                    weather: "Clear",
                    roadCondition: "Dry"
                }
            },
            {
                id: 5,
                name: "Residential District",
                riskLevel: "low",
                description: "Quiet neighborhood with wide, well-lit streets",
                incidents: 8,
                longitude: -71.0889,
                latitude: 42.3901,
                position: { left: '75%', top: '40%', width: '15%', height: '18%' },
                features: {
                    lightLevel: "Dark - lighted roadway",
                    weather: "Clear",
                    roadCondition: "Dry"
                }
            },
            {
                id: 6,
                name: "Park Boulevard",
                riskLevel: "low",
                description: "Low traffic area with good visibility",
                incidents: 5,
                longitude: -71.0389,
                latitude: 42.3401,
                position: { left: '45%', top: '75%', width: '12%', height: '10%' },
                features: {
                    lightLevel: "Daylight",
                    weather: "Clear",
                    roadCondition: "Dry"
                }
            }
        ];

        // Function to fetch risk predictions from backend (when implemented)
        async function fetchRiskData() {
            try {
                // Uncomment when our backend API is actually ready
                // const response = await fetch(`${API_BASE_URL}/risk-predictions`);
                // if (response.ok) {
                //     riskAreas = await response.json();
                //     renderRiskAreas();
                // }
                console.log('Using sample data. Backend API not yet implemented.');
            } catch (error) {
                console.error('Error fetching risk data:', error);
            }
        }

        // Function to get risk color
        function getRiskColor(riskLevel) {
            const colors = {
                high: { bg: 'bg-red-400', border: 'border-red-500', badge: 'bg-red-100 text-red-800 border-red-200' },
                medium: { bg: 'bg-yellow-400', border: 'border-yellow-500', badge: 'bg-yellow-100 text-yellow-800 border-yellow-200' },
                low: { bg: 'bg-green-400', border: 'border-green-500', badge: 'bg-green-100 text-green-800 border-green-200' }
            };
            return colors[riskLevel] || colors.medium;
        }

        // Function to get risk level emoji 
        function getRiskEmoji(riskLevel) {
            const emojis = { high: '‚ö†Ô∏è', medium: 'üî∂', low: '‚úÖ' };
            return emojis[riskLevel] || '‚ö†Ô∏è';
        }

        // Tab switching 
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.classList.remove('active', 'bg-white', 'text-gray-900', 'shadow-sm');
            });
            
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            const activeTab = document.getElementById(tabName + '-tab');
            activeTab.classList.add('active', 'bg-white', 'text-gray-900', 'shadow-sm');
        }

        // Function to show area details
        function showAreaDetails(areaId) {
            const area = riskAreas.find(a => a.id === areaId);
            if (area) {
                alert(`${area.name}\n\nRisk Level: ${area.riskLevel.toUpperCase()}\nIncidents: ${area.incidents}\n\n${area.description}\n\nConditions:\n- Light: ${area.features.lightLevel}\n- Weather: ${area.features.weather}\n- Road: ${area.features.roadCondition}`);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchRiskData();
            console.log('RiskMap initialized with', riskAreas.length, 'risk areas');
        });
    </script>
</body>
</html>
